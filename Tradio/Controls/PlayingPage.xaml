<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Tradio.Controls.PlayingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Tradio.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:Tradio.Models"
    mc:Ignorable="d">

    <Grid RowDefinitions="Auto,Auto,*,Auto,Auto" RowSpacing="6">

        <StackPanel Orientation="Horizontal" Spacing="4">
            <Button
                Grid.Column="2"
                VerticalAlignment="Center"
                Click="AddStationButton_Click">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon FontSize="16" Glyph="&#xE710;" />
                    <TextBlock Text="Station" />
                </StackPanel>
            </Button>

            <Button
                Grid.Column="3"
                VerticalAlignment="Center"
                Click="SettingsButton_Click">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon FontSize="16" Glyph="&#xE713;" />
                    <TextBlock Text="Settings" />
                </StackPanel>
            </Button>
        </StackPanel>

        <!--  Stations Header  -->
        <TextBlock
            Grid.Row="1"
            FontSize="16"
            FontWeight="SemiBold"
            Text="Stations" />

        <!--  Stations List  -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="StationsItemsControl" ItemsSource="{x:Bind ViewModel.Stations, Mode=OneWay}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="models:RadioStation">
                        <Grid Margin="0,0,0,8">
                            <Button
                                x:Name="StationButton"
                                Padding="16,12"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1"
                                Click="StationButton_Click"
                                CornerRadius="4"
                                Tag="{x:Bind}">
                                <Button.ContextFlyout>
                                    <MenuFlyout>
                                        <MenuFlyoutItem
                                            Click="EditStation_Click"
                                            Tag="{x:Bind}"
                                            Text="Edit">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE70F;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutItem
                                            Click="RemoveStation_Click"
                                            Tag="{x:Bind}"
                                            Text="Remove">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE74D;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                    </MenuFlyout>
                                </Button.ContextFlyout>
                                <Grid ColumnDefinitions="Auto,*">
                                    <!--  Selection indicator  -->
                                    <Border
                                        x:Name="SelectionIndicator"
                                        Grid.Column="0"
                                        Width="4"
                                        Margin="-16,-12,12,-12"
                                        Background="{ThemeResource AccentFillColorDefaultBrush}"
                                        CornerRadius="2,0,0,2"
                                        Visibility="Collapsed" />

                                    <TextBlock
                                        Grid.Column="1"
                                        FontSize="12"
                                        Text="{x:Bind Name}"
                                        TextWrapping="NoWrap" />
                                </Grid>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!--  Volume Control  -->
        <Grid Grid.Row="3" ColumnSpacing="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <FontIcon
                Grid.Column="0"
                VerticalAlignment="Center"
                FontSize="20"
                Glyph="&#xE767;" />
            <Slider
                x:Name="VolumeSlider"
                Grid.Column="1"
                Maximum="1"
                Minimum="0"
                SmallChange="0.01"
                StepFrequency="0.01"
                Value="{x:Bind ViewModel.Volume, Mode=TwoWay}" />
        </Grid>

        <!--  Play and Quit Buttons  -->
        <Grid Grid.Row="4" ColumnSpacing="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Button
                x:Name="PlayButton"
                Grid.Column="0"
                HorizontalAlignment="Stretch"
                Click="PlayButton_Click"
                Style="{StaticResource AccentButtonStyle}">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <FontIcon
                        x:Name="PlayIcon"
                        FontSize="16"
                        Glyph="&#xE768;" />
                    <TextBlock
                        x:Name="PlayText"
                        FontSize="12"
                        Text="Play" />
                </StackPanel>
            </Button>

            <Button
                Grid.Column="1"
                HorizontalAlignment="Stretch"
                Click="QuitButton_Click">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <FontIcon FontSize="16" Glyph="&#xE711;" />
                    <TextBlock FontSize="12" Text="Quit" />
                </StackPanel>
            </Button>
        </Grid>
    </Grid>
</Page>
